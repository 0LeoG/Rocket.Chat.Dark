// Main colors.
success-color = #43b581
danger-color = #f04747
highlight-color = #7289da
warning-color = #fcb316

// Buttons.
button-bg = highlight-color
button-fg = mix(button-bg, #ffffff, 20%)
button-cancel-bg = danger-color
button-cancel-fg = mix(button-cancel-bg, #ffffff, 20%)
button-secondary-bg = #eee
button-secondary-fg = #444

anchor-fg = highlight-color
anchor-hover-fg = darken(highlight-color, 10%)

// Code blocks, blockquotes, popups.
component-bg = #2a2c31
component-fg = #bbb
divider-color = darken(component-bg, 10%)

// Left and right sidebars.
sidebar-bg = #2f3136
sidebar-fg = #bbb
flex-tab-bg = darken(sidebar-bg, 15%)

// Status colors.
online-color = success-color
away-color = warning-color
busy-color = danger-color
invisible-color = #bbb

// Main chat area.
chat-bg = #36393e
chat-fg = mix(#fff, chat-bg, 70%)
border-color = darken(chat-bg, 10%)

// Inputs.
input-fg = mix(#000, chat-fg, 5%)
input-bg = mix(#000, chat-bg, 10%)
input-border = mix(#fff, chat-bg, 13%)
input-focus = mix(input-border, highlight-color, 80%)
placeholder-color = lighten(chat-bg, 20%)

icon-fg = mix(chat-bg, chat-fg, 50%)

::-webkit-input-placeholder
	color placeholder-color !important

:-moz-placeholder
	color placeholder-color !important

::-moz-placeholder
	color placeholder-color !important

:-ms-input-placeholder
	color placeholder-color !important

:root:root // To make sure we override.
	--badge-unread-background highlight-color
	--rc-color-button-primary highlight-color
	--rc-color-primary-dark darken(sidebar-bg, 7%)
	--rc-color-primary-darkest darken(sidebar-bg, 15%)
	--status-online online-color
	--status-away away-color
	--status-busy busy-color
	--status-invisible invisible-color
	--popover-background component-bg
	--popover-title-color component-fg
	--popover-item-color component-fg
	--popover-divider-color divider-color
	--sidebar-background sidebar-bg
	--badge-background lighten(sidebar-bg, 8%)
	--sidebar-item-hover-background darken(sidebar-bg, 13%)
	--sidebar-item-popup-background darken(sidebar-bg, 13%)
	--message-box-container-border-color input-border
	--rc-color-error danger-color
	--create-channel-title-color chat-fg
	--tags-border-color input-border
	--popup-list-background component-bg
	--popup-list-name-color component-fg
	--popup-list-background-hover highlight-color
	--popup-list-selected-background highlight-color
	--tags-text-color #fff
	--tags-background highlight-color
	--message-box-markdown-color chat-fg
	--message-box-markdown-hover-color darken(chat-fg, 50%)
	--message-box-user-typing-user-color highlight-color

.color-primary-font-color
	color chat-fg

html, body, .content-background-color, .loading-animation
	background-color chat-bg

.secondary-background-color
	background-color component-bg

.border-secondary-background-color
	border-color lighten(component-bg, 10%)

.border-component-color
	border border-color

.background-component-color,
.background-primary-action-color
	background-color highlight-color

.background-info-font-color
	background-color highlight-color

.secondary-font-color
	color button-fg

.button,
.button.primary,
.rc-button
	background-color button-bg
	color button-fg

	&:hover
		color button-fg
		background-color darken(button-bg, 10%)

	&[disabled]
		background-color mix(chat-bg, button-bg, 50%)
		color mix(chat-bg, button-fg, 50%)

.button.danger
	background-color button-cancel-bg
	color button-cancel-fg

	&:hover
		background-color darken(button-cancel-bg, 10%)
		color button-fg

	&[disabled]
		background-color mix(chat-bg, button-cancel-bg, 50%)
		color mix(chat-bg, button-cancel-fg, 50%)

.button.secondary
	background-color button-secondary-bg
	color button-secondary-fg

	&:hover
		background-color darken(button-secondary-bg, 10%)

// Loading dots.
.loading-animation > div,
.main-content .loading-animation > div,
.flex-tab .loading-animation > div
	background-color component-fg

// The main bar that goes above the chat area.
.rc-old .fixed-title
	border-bottom-style solid
	border-bottom-width 1px

// The message section at the bottom of the chat area.
.messages-container .footer
	background transparent
	border-top-style solid
	border-top-width 1px
	box-shadow 0 1px 2px -1px mix(#fff, chat-bg, 6%)

// "Start of conversation" text.
.messages-box .start
	color #888
	text-transform uppercase
	font-weight 700
	font-size 12px

// Links inside messages.
.message a
	color anchor-fg

	&:hover
		color anchor-hover-fg

// All avatars.
.avatar
	box-shadow: 1px 1px 3px 0px rgba(0, 0, 0, 0.5)

// Sidebar on the left.
.sidebar
	box-shadow 1px 0 2px -1px rgba(0, 0, 0, 0.5)
	border-right 1px solid sidebar-bg

// Sidebar on the right.
.rc-old .flex-tab-container .flex-tab-bar
	background-color sidebar-bg
	border-left 1px solid border-color
	box-shadow -1px 0 2px -1px rgba(0, 0, 0, 0.5)

	.tab-button-icon
		color sidebar-fg
		fill sidebar-fg

	.tab-button:hover, .tab-button.active
		background-color flex-tab-bg

	.tab-button.active
		margin-left -3px

// Slide-out sidebar
.flex-tab .content, .flex-tab .user-view, .flex-tab .list-view
	background-color flex-tab-bg

.flex-tab input:focus, .flex-tab select:focus, .flex-tab textarea:focus
	border-color input-focus

.flex-tab .channel-settings .button,
.flex-tab .channel-settings .buttons .button
	background-color darken(flex-tab-bg, 20%)
	color chat-fg

	&:hover
		background-color darken(flex-tab-bg, 30%)
		color lighten(chat-fg, 10%)

// All inputs except sidebar search.
input, select, textarea,
.rc-input__element,
.emoji-top .emoji-filter .search,
.rc-tags,
.flex-tab .channel-settings .editing,
.rc-old select, .rc-old input[type="text"], .rc-old input[type="number"], .rc-old input[type="email"], .rc-old input[type="url"], .rc-old input[type="password"],
.rc-old #login-card .input-line input, .rc-old #login-card .input-line select
	background-color input-bg
	border 2px solid input-border
	border-radius 2px !important // I don't feel like overriding each class.

	&:focus
		border-color input-focus !important // To override Rocket Chat's !important.

	&[disabled]
		background-color lighten(input-bg, 10%)
		border-color lighten(input-border, 10%)

// All inputs + search in the sidebar.
input, select, textarea,
.rc-input__element,
.toolbar .rc-input__element
	color input-fg

// New day divider.
.message.new-day
	&::before
		background-color chat-bg
		color mix(#fff, chat-bg, 30%)

	&::after
		border-color mix(#fff, chat-bg, 4%)

.flex-tab .message.new-day
	&::before
		background-color flex-tab-bg
		color mix(#fff, flex-tab-bg, 15%)

	&::after
		border-color mix(#fff, flex-tab-bg, 4%)

// File links.
.rc-old .list-view.uploaded-files-list .file-name
	color highlight-color
	border-bottom-color lighten(sidebar-bg, 5%)

	&:hover
		color lighten(highlight-color, 10%)
		text-decoration none

// Icons next to files.
.message a i, .flex-tab a i, .message a[class^="icon-"], .flex-tab a[class^="icon-"]
	color lighten(sidebar-bg, 30%)

	&:hover
		color lighten(sidebar-bg, 40%)

code, .rc-old .code-colors
	background-color component-bg
	border-color darken(component-bg, 5%)
	border-radius 2px
	color chat-fg
	font-weight 400

// Emoji filter icons.
.filter-item
	border-color darken(component-fg, 30%)

	.category-link
		color darken(component-fg, 30%)

	&:hover
		border-color darken(component-fg, 10%)

		.category-link
			color darken(component-fg, 10%)

	&.active
		border-color highlight-color

		.category-link
			color highlight-color

// Hover over emojis.
.emoji-picker .emojis .emoji-list li:hover
	background-color darken(component-bg, 20%)

// Unread bar.
.first-unread .body::before,
.first-unread-opaque .body::before
	background-color highlight-color

.first-unread .body::after,
.first-unread-opaque .body::after
	color mix(chat-bg, highlight-color, 80%)
	font-weight 700

// Reactions.
.message .reactions
	> li
		background-color component-bg
		border-color darken(component-bg, 10%)

	> li.selected
		background-color component-bg
		border-color mix(component-bg, highlight-color, 50%)
		color mix(component-bg, highlight-color, 50%)

	> li.add-reaction
		border none

// Toggle checkbox.
.input.checkbox.toggle
	label:before
		background-color danger-color

	label:hover:before
		background-color darken(danger-color, 10%)

.input.checkbox.toggle,
.flex-nav .input.checkbox.toggle
	input:checked + label:before
		background-color success-color

	input:checked + label:hover:before
		background-color darken(success-color, 10%)

.rc-old .list-view > .title .see-all
	text-decoration none

	&:hover
		text-decoration underline

// Upload progress bar.
.upload-progress
	.upload-progress-progress
		background-color highlight-color

	.upload-progress-text
		color mix(chat-bg, highlight-color, 80%)

	button
		color mix(chat-bg, highlight-color, 80%)

	button:hover
		color #fff

// Popups like when uploading a file.
.sweet-alert
	background-color component-bg

	h2, p
		color component-fg

	input
		border-color mix(#fff, component-bg, 4%)
		color component-fg
		background-color darken(component-bg, 10%)

		&:focus
			border-color input-focus
			box-shadow none
			color #eee

	// TODO: There are some gaps, I think they're always there but just more apparent against the dark background.
	.sa-icon.sa-success::before,
	.sa-icon.sa-success::after
		background-color component-bg

	.sa-icon.sa-success .sa-fix
		background-color component-bg

	// !important because the styles we need to override are inline...
	button.confirm
		background-color button-bg !important
		color button-fg !important

		&:hover
			color button-fg !important
			background-color darken(button-bg, 10%) !important

	button.cancel
		background-color button-secondary-bg
		color button-secondary-fg

		&:hover
			background-color darken(button-secondary-bg, 10%)

// When editing a message.
.message.editing, .rc-message-box__container.editing
	background-color mix(chat-bg, highlight-color, 90%)

// Preferences page styles. Hopefully this gets updated to match all the other pages.
.preferences-page__header
	border-bottom 1px solid border-color
	box-shadow none
	color chat-fg

.rc-form-legend, .rc-form-label
	color chat-fg

// Create a channel switch label.
.rc-switch__text
	color chat-fg

// Invite users popup
.rc-popup-list__item.selected,
.rc-popup-list__item:hover
	.rc-popup-list__item-name
		color #fff

// Icons in inputs and markdown icons.
.rc-input__icon,
.rc-message-box .rc-icon,
.rc-message-box__toolbar-markdown-link
	color icon-fg
	fill icon-fg

	&:hover
		color lighten(icon-fg, 20%)
		fill lighten(icon-fg, 20%)

// Add fill for icons that don't work with color.
.rc-popover__icon-element
	fill var(--popover-item-color)

// Add hover for the popover.
.rc-popover__item:hover
	background-color darken(component-bg, 10%)

// Remove the border and space on mobile, we have our own.
@media (max-width: 500px)
	.rc-message-box
		margin-top 0

	.rc-message-box__container
		border none

// Slight adjustment to the channel setting buttons due to the increased border width.
.flex-tab .channel-settings .buttons
	bottom 1px
	top 0

	.button
		padding 7px

.rc-old #login-card .input-line .input-error
	color danger-color

.burger i
	background-color chat-fg

.unread-bar
	&, button
		color #fff

	button:hover
		color mix(#fff, highlight-color, 80%)

.rc-old .announcement
	background-color highlight-color

@import "dark-admin"
@import "atom-one-dark"

// The rest of these are opinionated "fixes".
:root:root
	// Bigger room titles like they used to be
	--rooms-list-title-text-size 0.95rem

// Less space after the room title.
.rooms-list__type
	padding-bottom 5px

	// Move the badge so it's not touching the title text.
	.badge
		margin-left 5px

// Make the triple dot icon fade in like the background does.
.sidebar-item__menu
	display: block
	opacity 0
	transition all 0.3s

.sidebar-item:hover .sidebar-item__menu
	opacity 1

.toolbar
	padding 0 10px 20px

.rc-old .message.new-day
	margin-top 20px

	&:before
		top -9px

	&:after
		display none

.rc-old .list-view > .title p
	margin-top 10px

.rc-old .buttons-group
	margin-bottom 10px
	margin-top 10px

.rc-tags
	padding-left 2rem

	.rc-tags__tag:first-child
		margin-left 1rem

.messages-box ul
	padding-bottom 20px

.rc-old #login-card .submit
	margin-bottom 12px

.rc-old #login-card .forgot-password, .rc-old #login-card .back-to-login
	margin-top 4px

.rc-old #login-card .input-line label
	margin-left 0

.rc-old #login-card .input-line .input-error
	font-size 0.9em
	margin-top 3px
	padding-left 0

// Message borders. Unfortunately there is no way to tell which message is last in a group
// so we have to use margin and the disable hover because it looks odd.
.rc-old .message
	border-top 1px solid lighten(chat-bg, 5%)
	padding-top 20px
	margin-top 20px

	&.sequential
		border-top none
		padding-top 0

	&:hover
		background-color transparent

.rc-old .first-unread .body::before, .rc-old .cozy .first-unread .body::before, .rc-old .compact .first-unread .body::before
	height 1px

.rc-old .first-unread.new-day:before
	color highlight-color

.rc-old .first-unread .body::after, .rc-old .cozy .first-unread .body::after, .rc-old .compact .first-unread .body::after
	color highlight-color
	font-size 0.8em
	left auto
	right -4px
	top -15px
	z-index 1

.rc-old .first-unread.message, .rc-old .first-unread.sequential.message, .rc-old .cozy .first-unread.message, .rc-old .cozy .first-unread.sequential.message, .rc-old .compact .first-unread.message, .rc-old .compact .first-unread.sequential.message
	&.sequential
		padding-top 5px

.upload-progress-progress
	z-index 999

.message-actions
	top 35px

.message.sequential .message-actions
	top 0

.messages-box .start
	margin-top 0
